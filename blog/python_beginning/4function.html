<!DOCTYPE html>
<html>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?a4d4cfbf5559c427ea39c9814a033024";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<head>
  <title>函数 - peishunli.site</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="..\..\favicon.ico" type="image/ico">
  <link rel="stylesheet" type="text/css" href="..\..\css\site.min.css">
  <script type="text/javascript" async="async" src="..\..\mathjax\MathJax.js?config=TeX-AMS_HTML"></script>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <link href="..\..\tipuesearch\tipuesearch.css" rel="stylesheet">
  <script src="..\..\tipuesearch\tipuesearch_set.js"></script>
  <script src="..\..\tipuesearch\tipuesearch.min.js"></script>
</head>
<body>
<div id="topbar">
  <div style="display: block; float: right">
  <form action="..\..\search.html">
  <input type="text" placeholder="Search Here" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
  </div>
</div>
<ul class="breadcrumb"><li><a href="..\..\index.html">HOME</a></li><li><a href="..\posts.html">POSTS</a></li><li><a href="..\posts.html#PYTHON_BEGINNING">PYTHON_BEGINNING</a></li><li class="active">函数</li></ul>

<div id="view">
<div class="toc">
<ul>
<li><a href="#1">1 创建函数</a><ul>
<li><a href="#11">1.1 记录函数</a></li>
</ul>
</li>
<li><a href="#2">2 参数</a><ul>
<li><a href="#21">2.1 我能改变参数吗</a></li>
<li><a href="#22">2.2 关键字参数和默认值</a></li>
<li><a href="#23">2.3 收集参数</a></li>
<li><a href="#24">2.4 反转过程</a></li>
<li><a href="#25">2.5 练习使用参数</a></li>
</ul>
</li>
<li><a href="#3">3 作用域</a></li>
<li><a href="#4">4 递归</a></li>
</ul>
</div>
<div id="container">

<p>接下来会介绍如果将语句组织成函数。还会详细介绍参数（parameter）和作用域（scope），以及递归的概念。</p>
<h3 id="1">1 创建函数</h3>
<p>内建的callable函数可以用来判断函数是否可调用：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="kn">import</span> <span class="nn">math</span>
<span class="n">x</span><span class="o">=</span><span class="mi">1</span>
<span class="n">y</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span>
<span class="nb">callable</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>False
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="nb">callable</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>True
</pre></div>
</td></tr></table>

<p>怎么定义函数呢？使用def语句即可：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&#39;Hello, &#39;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">&#39;!&#39;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">print</span> <span class="n">hello</span><span class="p">(</span><span class="s">&#39;world&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Hello, world!
</pre></div>
</td></tr></table>

<p>本例中return语句是用来从函数中返回值的。</p>
<h4 id="11">1.1 记录函数</h4>
<p>如果想给函数写文档，让后面使用该函数人能理解的话，可以加入注释（例如，<code>#hello</code>、<code>"""hello""""</code>、<code>'''hello'''</code>）。下面代码演示了如何给函数添加文档字符串：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Calculates the square of the number x.&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span>
</pre></div>
</td></tr></table>

<p>文档字符串可以按如下方式访问：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">square</span><span class="o">.</span><span class="n">__doc__</span>              <span class="c">#__doc__是函数属性。属性名中的双下划线表示它是个特殊属性。</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>&#39;Calculates the square of the number x.&#39;
</pre></div>
</td></tr></table>

<p>内建的help函数是非常有用的，可以得到关于函数，包括它的文档字符串信息。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">help</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="nx">Help</span> <span class="nx">on</span> <span class="kd">function</span> <span class="nx">square</span> <span class="k">in</span> <span class="nx">module</span> <span class="nx">__main__</span><span class="o">:</span>

<span class="nx">square</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
    <span class="nx">Calculates</span> <span class="nx">the</span> <span class="nx">square</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">number</span> <span class="nx">x</span><span class="p">.</span>
</pre></div>
</td></tr></table>

<h3 id="2">2 参数</h3>
<p>写在def语句中函数名后面的变量通常叫做函数的<strong>形式</strong>参数，而调用函数时提供的值是<strong>实际</strong>参数，或者称为<strong>参数</strong>。</p>
<h4 id="21">2.1 我能改变参数吗</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">try_to_change</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">n</span><span class="o">=</span><span class="s">&#39;Gumby&#39;</span>
<span class="n">name</span><span class="o">=</span><span class="s">&#39;Entity&#39;</span>
<span class="n">try_to_change</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">name</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>&#39;Entity&#39;
</pre></div>
</td></tr></table>

<p>在try_to_change内，参数n获得了新值，但是它没有影响到name变量。   <br />
字符串（以及数字和元组）是<strong>不可改变</strong>的，即无法被修改（只能用新值覆盖）。所以它们做参数的时候也就无需多做介绍。但是如果将可变的数据结构如列表用作参数的时候会发生什么：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">change</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;Humby&#39;</span>
<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Entity&#39;</span><span class="p">,</span><span class="s">&#39;Thing&#39;</span><span class="p">]</span>
<span class="n">change</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
<span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Humby&#39;, &#39;Thing&#39;]
</pre></div>
</td></tr></table>

<p>本例中，<strong>参数被改变了</strong>。有些奇怪吧？下面不用函数调用再做一次：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Entity&#39;</span><span class="p">,</span><span class="s">&#39;Thing&#39;</span><span class="p">]</span>
<span class="n">n</span><span class="o">=</span><span class="n">names</span>    <span class="c">#当两个变量同时引用一个列表的时候，它们是同一个对象。</span>
<span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;Gumby&#39;</span>
<span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Gumby&#39;, &#39;Thing&#39;]
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">n</span> <span class="ow">is</span> <span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>True
</pre></div>
</td></tr></table>

<p>如果想避免上述情况，可以复制一个列表的副本。当在序列中做切片的时候，返回的切片就是一个副本。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Entity&#39;</span><span class="p">,</span><span class="s">&#39;Thing&#39;</span><span class="p">]</span>
<span class="n">n</span><span class="o">=</span><span class="n">names</span><span class="p">[:]</span>
<span class="n">n</span> <span class="ow">is</span> <span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>False
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">n</span><span class="o">==</span><span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>True
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;Gumby&#39;</span>
<span class="n">names</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Entity&#39;, &#39;Thing&#39;]
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">n</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Gumby&#39;, &#39;Thing&#39;]
</pre></div>
</td></tr></table>

<p><strong>使用函数改变数据结构（比如列表或字典）是将程序抽象化的好方法，这时就需要改变参数。</strong>假设需要编写一个存储名字并且能用名字、中间名或姓查找联系人的程序，可以使用下面的数据结构：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">data</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">data</span><span class="p">[</span><span class="s">&#39;middle&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">data</span><span class="p">[</span><span class="s">&#39;last&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">{}</span>
<span class="n">storage</span><span class="o">=</span><span class="p">{}</span>   <span class="c">#storage就是参数，需要改变</span>
<span class="n">init</span><span class="p">(</span><span class="n">storage</span><span class="p">)</span>
<span class="n">storage</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>{&#39;first&#39;: {}, &#39;last&#39;: {}, &#39;middle&#39;: {}}
</pre></div>
</td></tr></table>

<p>可以看到，函数init包办了初始化的工作，让代码更易读。<br />
把自己的名字加入这个数据结构：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">me</span><span class="o">=</span><span class="s">&#39;Magnus Lie Hetland&#39;</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">][</span><span class="s">&#39;Magnus&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">me</span><span class="p">]</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;middle&#39;</span><span class="p">][</span><span class="s">&#39;Lie&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">me</span><span class="p">]</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;last&#39;</span><span class="p">][</span><span class="s">&#39;Hetland&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">me</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<p>每个键下面都存储了一个以人名组成的列表。本例中，列表中只有我。   <br />
现在如果想得到所有注册中间名为Lie的人，如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">storage</span><span class="p">[</span><span class="s">&#39;middle&#39;</span><span class="p">][</span><span class="s">&#39;Lie&#39;</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Magnus Lie Hetland&#39;]
</pre></div>
</td></tr></table>

<p>将人名加到列表中的步骤有点枯燥乏味，尤其是要加入很多姓名相同的人时，需要扩展已经存储了那些名字的列表，如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">my_sister</span><span class="o">=</span><span class="s">&#39;Anne Lie Hetland&#39;</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;Anne&#39;</span><span class="p">,[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_sister</span><span class="p">)</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;middle&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;Lie&#39;</span><span class="p">,[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_sister</span><span class="p">)</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;last&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;Hetland&#39;</span><span class="p">,[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">my_sister</span><span class="p">)</span>
<span class="n">storage</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">][</span><span class="s">&#39;Anne&#39;</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Anne Lie Hetland&#39;]
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">storage</span><span class="p">[</span><span class="s">&#39;middle&#39;</span><span class="p">][</span><span class="s">&#39;Lie&#39;</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Magnus Lie Hetland&#39;, &#39;Anne Lie Hetland&#39;]
</pre></div>
</td></tr></table>

<p>如果要写个大程序来这样更新列表，那么很显然程序很快就会变得臃肿且笨拙不堪了。   <br />
在编写存储名字的函数前，先写个获得名字的函数：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">lookup</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span><span class="s">&#39;middle&#39;</span><span class="p">,</span><span class="s">&#39;Lie&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Magnus Lie Hetland&#39;, &#39;Anne Lie Hetland&#39;]
</pre></div>
</td></tr></table>

<p>标签（比如”middle“）以及名字（比如”Lie“）可以作为参数提供给lookup函数使用，这样会获得包含了全名的列表。    <br />
注意，返回的列表和存储在数据结构中的列表是相同的，所以如果列表被修改了，那么也会影响数据结构。    <br />
编写存储名字的函数：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">full_name</span><span class="p">):</span>
    <span class="n">names</span><span class="o">=</span><span class="n">full_name</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>     <span class="c">#拆分full_name，得到一个names列表</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">names</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>     <span class="c">#如果names长度为2（只有首名和末名），则插入一个空字符作为中间名</span>
    <span class="n">labels</span><span class="o">=</span><span class="s">&#39;first&#39;</span><span class="p">,</span><span class="s">&#39;middle&#39;</span><span class="p">,</span><span class="s">&#39;last&#39;</span>    <span class="c">#将&#39;first&#39;,&#39;middle&#39;,&#39;last&#39;作为元组存储在labels中，也可以使用列表，只是为了方便而去掉括号</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>  <span class="c">#使用zip函数联合标签和名字</span>
        <span class="n">people</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">people</span><span class="p">:</span>
            <span class="n">people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">full_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">name</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<p>来试用一下刚刚实现的程序：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">Mynames</span><span class="o">=</span><span class="p">{}</span>
<span class="n">init</span><span class="p">(</span><span class="n">Mynames</span><span class="p">)</span>
<span class="n">store</span><span class="p">(</span><span class="n">Mynames</span><span class="p">,</span><span class="s">&#39;Magnus Lie Hetland&#39;</span><span class="p">)</span>
<span class="n">lookup</span><span class="p">(</span><span class="n">Mynames</span><span class="p">,</span><span class="s">&#39;middle&#39;</span><span class="p">,</span><span class="s">&#39;Lie&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Magnus Lie Hetland&#39;]
</pre></div>
</td></tr></table>

<h4 id="22">2.2 关键字参数和默认值</h4>
<p>上述所使用的参数都叫做<strong>位置参数</strong>，因为它们的位置很重要—事实上比它们的名字更加重要。接下来引入的这个功能可以回避位置问题，当你慢慢习惯使用这个功能以后，就会发现程序规模越大，它们的作用也就越大。   <br />
考虑下面两个函数：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">hello_1</span><span class="p">(</span><span class="n">greeting</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">greeting</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello_2</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">greeting</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">greeting</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>两个代码所实现的是完全一样的功能，只是参数名字反过来了：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_1</span><span class="p">(</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span><span class="s">&#39;world&#39;</span><span class="p">)</span>
<span class="n">hello_2</span><span class="p">(</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span><span class="s">&#39;world&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre>Hello,world
Hello,world
</pre></div>
</td></tr></table>

<p>有些时候（尤其是参数很多的时候），参数的顺序是很难记住的。为了让事情简单些，可以提供参数的名字：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_1</span><span class="p">(</span><span class="n">greeting</span><span class="o">=</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;world&#39;</span><span class="p">)</span>
<span class="n">hello_1</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;world&#39;</span><span class="p">,</span><span class="n">greeting</span><span class="o">=</span><span class="s">&#39;Hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre>Hello,world
Hello,world
</pre></div>
</td></tr></table>

<p>这样一来，顺序就完全没影响了。但参数名和值一定要对应。这类使用参数名提供的参数叫做<strong>关键字参数</strong>。它的作用在于可以明确每个参数的作用。尽管这么做打的字就多了些，但是很显然，每个参数的含义变得更加清晰。而且就算弄乱了参数的顺序，对于程序的功能也没有任何影响。    <br />
关键字参数最厉害的地方在于可以在函数中给参数提供默认值：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">hello_3</span><span class="p">(</span><span class="n">greeting</span><span class="o">=</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;world&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">greeting</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>当参数具有默认值的时候，调用的时候就不用提供参数了：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_3</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Hello,world
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_3</span><span class="p">(</span><span class="s">&#39;Greetings&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Greetings,world
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_3</span><span class="p">(</span><span class="s">&#39;Greetings&#39;</span><span class="p">,</span><span class="s">&#39;universe&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Greetings,universe
</pre></div>
</td></tr></table>

<p>但是如果只想提供name参数，而让greeting使用默认值该怎么办呢？</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">hello_3</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Gumby&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Hello,Gumby
</pre></div>
</td></tr></table>

<p>位置和关键字参数是可以联合使用的。把位置参数放置在前面就可以了。</p>
<h4 id="23">2.3 收集参数</h4>
<p>有些时候让用户提供任意数量的参数是很有用的。比如在名字存储程序中，用户每次只能存一个名字。如果能像下面这样存储多个名字就更好了：   <br />
store(data,name1,name2,name3)    <br />
用户可以给函数提供任意多的参数。实现起来也不难。试着像下面这样定义函数：     </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_params</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">params</span>
</pre></div>
</td></tr></table>

<p>这里只指定了一个参数，但是前面加上了个星号。这是什么意思？让我们用一个参数调用函数看看会发生什么：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">print_params</span><span class="p">(</span><span class="s">&#39;Testing&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>(&#39;Testing&#39;,)
</pre></div>
</td></tr></table>

<p>可以看到，结果作为元组打印出来，因为里面有个逗号。那么在params中使用多个参数看看会发生什么：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">print_params</span><span class="p">(</span><span class="s">&#39;Testing&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>(&#39;Testing&#39;, 1, 2, 3)
</pre></div>
</td></tr></table>

<p>参数前的星号将所有值放置在同一个元组中。可以说是将这些值收集起来，然后使用。不知道能不能联合普通参数？</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_params_2</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">title</span>
    <span class="k">print</span> <span class="n">params</span>
<span class="n">print_params_2</span><span class="p">(</span><span class="s">&#39;Params:&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre>Params:
(1, 2, 3)
</pre></div>
</td></tr></table>

<p>所以星号的意思就是“收集其余的位置参数”。如果不提供任何供收集的元素，params就是个空元组：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">print_params_2</span><span class="p">(</span><span class="s">&#39;Nothing:&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre>Nothing:
()
</pre></div>
</td></tr></table>

<p>那么能不能处理关键字参数呢？</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">print_params_2</span><span class="p">(</span><span class="s">&#39;Hmm...&#39;</span><span class="p">,</span><span class="n">something</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-31-3b2ecc07b82c&gt; in &lt;module&gt;()
----&gt; 1 print_params_2(&#39;Hmm...&#39;,something=42)


TypeError: print_params_2() got an unexpected keyword argument &#39;something&#39;
</pre></div>
</td></tr></table>

<p>看来不行。所以我们需要另外一个能处理<strong>关键字参数</strong>的“收集”操作。原来需要在参数前面加上两个星号“**”</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_params_3</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">params</span>
<span class="n">print_params_3</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>{&#39;y&#39;: 2, &#39;x&#39;: 1, &#39;z&#39;: 3}
</pre></div>
</td></tr></table>

<p>返回的是字典而不是元组。放一起来看看：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_params_4</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="o">*</span><span class="n">pospar</span><span class="p">,</span><span class="o">**</span><span class="n">keypar</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>
    <span class="k">print</span> <span class="n">pospar</span>
    <span class="k">print</span> <span class="n">keypar</span>
<span class="n">print_params_4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">foo</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">bar</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre>1 2 3
(5, 6, 7)
{&#39;foo&#39;: 1, &#39;bar&#39;: 2}
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">print_params_4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre>1 2 3
()
{}
</pre></div>
</td></tr></table>

<p>联合使用这些功能，可以做的事就多了。现在回到原来的问题上：怎么实现多个名字同时存储。解决方案如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="o">*</span><span class="n">full_names</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">full_name</span> <span class="ow">in</span> <span class="n">full_names</span><span class="p">:</span>
        <span class="n">names</span><span class="o">=</span><span class="n">full_name</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>     
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">names</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>  
        <span class="n">labels</span><span class="o">=</span><span class="s">&#39;first&#39;</span><span class="p">,</span><span class="s">&#39;middle&#39;</span><span class="p">,</span><span class="s">&#39;last&#39;</span>   
        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span> 
            <span class="n">people</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">people</span><span class="p">:</span>
                <span class="n">people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">full_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">name</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">d</span><span class="o">=</span><span class="p">{}</span>
<span class="n">init</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">store</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="s">&#39;Magnus Lie Hetland&#39;</span><span class="p">,</span><span class="s">&#39;Luke Skywaller&#39;</span><span class="p">)</span>
<span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="s">&#39;last&#39;</span><span class="p">,</span><span class="s">&#39;Skywaller&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[&#39;Luke Skywaller&#39;]
</pre></div>
</td></tr></table>

<h4 id="24">2.4 反转过程</h4>
<p>如何将参数收集为元组和字典已经讨论过了，但是事实上，如果使用*和**的话，也可以执行相反的操作。那么参数收集的逆过程是什么呢？  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>3
</pre></div>
</td></tr></table>

<p>比如说有个包含由两个要相加的数字组成的元组，可以使用*运算符来分配它们到“另一端”：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">params</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>3
</pre></div>
</td></tr></table>

<p>可以使用同样的技术来处理字典—使用双星号运算符。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">hello_3</span><span class="p">(</span><span class="n">greeting</span><span class="o">=</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;world&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">greeting</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
<span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Sir Robin&#39;</span><span class="p">,</span><span class="s">&#39;greeting&#39;</span><span class="p">:</span><span class="s">&#39;Well met&#39;</span><span class="p">}</span>
<span class="n">hello_3</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Well met,Sir Robin
</pre></div>
</td></tr></table>

<p>在定义或调用函数时使用星号（或者双星号）仅传递元组或字典。</p>
<h4 id="25">2.5 练习使用参数</h4>
<p>下面把上述方法放在一起举个例子： </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">story</span><span class="p">(</span><span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&#39;Once upon a time, there was a &#39;</span> \
            <span class="s">&#39;</span><span class="si">%(job)s</span><span class="s"> called </span><span class="si">%(name)s</span><span class="s">.&#39;</span> <span class="o">%</span><span class="n">kwds</span>
<span class="k">def</span> <span class="nf">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="o">*</span><span class="n">others</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">others</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;Received redundant parameters:&#39;</span><span class="p">,</span><span class="n">others</span>
    <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">interval</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">stop</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="s">&#39;Imitates range() for step &gt; 0&#39;</span>
    <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">start</span><span class="p">,</span><span class="n">stop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">start</span>   <span class="c">#指定参数</span>
    <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">i</span><span class="o">=</span><span class="n">start</span>
    <span class="k">while</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">stop</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">i</span><span class="o">+=</span><span class="n">step</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">print</span> <span class="n">story</span><span class="p">(</span><span class="n">job</span><span class="o">=</span><span class="s">&#39;king&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Gumby&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Once upon a time, there was a king called Gumby.
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">print</span> <span class="n">story</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Sir Robin&#39;</span><span class="p">,</span><span class="n">job</span><span class="o">=</span><span class="s">&#39;brave knight&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Once upon a time, there was a brave knight called Sir Robin.
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;job&#39;</span><span class="p">:</span><span class="s">&#39;language&#39;</span><span class="p">,</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Python&#39;</span><span class="p">}</span>
<span class="k">print</span> <span class="n">story</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Once upon a time, there was a language called Python.
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s">&#39;job&#39;</span><span class="p">]</span>
<span class="n">params</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>{&#39;name&#39;: &#39;Python&#39;}
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">print</span> <span class="n">story</span><span class="p">(</span><span class="n">job</span><span class="o">=</span><span class="s">&#39;stroke of genius&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>Once upon a time, there was a stroke of genius called Python.
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">power</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>8
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">power</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>9
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">power</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>8
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">params</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,)</span><span class="o">*</span><span class="mi">2</span>
<span class="n">params</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>(2, 2)
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">power</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>4
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">params</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,)</span><span class="o">*</span><span class="mi">4</span>
<span class="n">power</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre>Received redundant parameters: (2, 2)





4
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">interval</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>[1, 3, 5, 7]
</pre></div>
</td></tr></table>

<h3 id="3">3 作用域</h3>
<p>到底什么是变量？可以把它们看作是值的名字。在执行x=1赋值语句后，名称x引用到值1。这就像用字典一样，键引用值。变量和所对应的值用的是个“不可见”的字典。内建的vars函数可以返回这个字典：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">x</span><span class="o">=</span><span class="mi">1</span>
<span class="n">scope</span><span class="o">=</span><span class="nb">vars</span><span class="p">()</span>
<span class="n">scope</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>1
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">scope</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>
<span class="n">x</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>2
</pre></div>
</td></tr></table>

<p>这类“不可见字典”叫做<strong>命名空间</strong>或者<strong>作用域</strong>。那么到底有多少个命名空间？除了全局作用域外，每个函数调用都会创建一个新的作用域（<strong>局部作用域</strong>或<strong>局部命名空间</strong>）：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">x</span><span class="o">=</span><span class="mi">42</span>
<span class="n">x</span><span class="o">=</span><span class="mi">1</span>
<span class="n">foo</span><span class="p">()</span>
<span class="n">x</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>1
</pre></div>
</td></tr></table>

<p>当调用foo的时候，新的命名空间被创建，它只作用于foo内的代码块。函数内的变量被称为局部变量（local variable）。</p>
<p>如果在函数内部将值赋予一个变量，它会自动成为局部变量—除非告知Python将其声明为全局变量：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">x</span><span class="o">=</span><span class="mi">1</span>
<span class="k">def</span> <span class="nf">change_global</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">x</span>
    <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="n">change_global</span><span class="p">()</span>
<span class="n">x</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>2
</pre></div>
</td></tr></table>

<h3 id="4">4 递归</h3>
<p>函数可以调用其他函数，也可以调用自身。递归（recursion）简单来说就是引用（或调用）自身的意思。一切用递归实现的功能都可以用循环实现，但有些时候递归函数更易读。<br />
首先，计算数n的阶乘。那么怎么计算呢？可以使用循环：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">factorial_1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">result</span><span class="o">=</span><span class="n">n</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">result</span><span class="o">*=</span><span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="n">factorial_1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>6
</pre></div>
</td></tr></table>

<p>下面来看看使用递归的版本：   <br />
1的阶乘是1；   <br />
大于1的数n的阶乘是n乘n-1的阶乘。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">factorial_2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">factorial_2</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">factorial_2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>6
</pre></div>
</td></tr></table>

<p>考虑另外一个例子，计算幂（就像内建的pow函数或**运算符一样）。   <br />
先看一个简单的例子：power(x,n)是x自乘n-1次的结果。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">power_1</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="n">result</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
         <span class="n">result</span><span class="o">*=</span><span class="n">x</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="n">power_1</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>8
</pre></div>
</td></tr></table>

<p>接下来把它改为递归版本：<br />
对于任意数字x来说，power(x,0)是1；   <br />
对于任何大于0的数，power(x,n)是x乘以power(x,n-1)的结果。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="k">def</span> <span class="nf">power_2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">power_2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre>8
</pre></div>
</td></tr></table>
<hr/>
标签: <span class="label label-default">python</span> <span class="label label-default">函数</span> <span class="label label-default">参数</span> <span class="label label-default">4</span><br/>
创建时间: 2016.10.30<br/>
上次修改: 2016.10.30
<div class="ds-thread" data-thread-key="870a51ba2a9edfadc62ce99af52cabd1" data-title="函数" data-url="http://peishunli.github.io/blog/python_beginning/4function.html"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"peishunli"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (
        document.location.protocol == 'https:' ? 'https:' : 'http:'
    ) + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
</div>

<footer class="page-footer">
  <div id="container">
    <div class="footer-left">
        <h4 class="white-text">关于peishunli.site</h4>
        <ul class="mdul">
          <li class="mdli white-text">本网站提供的内容仅用于学习和分享，不能保证内容一定正确...</li>
        </ul>
    </div>
    <div class="footer-right">
        <h4 class="white-text">其他网站链接</h4>
        <ul class="mdul">
          <li class="mdli"><a class="white-text" href="http://github.com/">Github</a></li>
		  <li class="mdli"><a class="white-text" href="http://www.zhihu.com/">知乎</a></li>
        </ul>
    </div>
  </div>
  <div class="footer-copyright">
    <div id="container">
        Copyright © 2015-2016 Powered by peishunli. All rights reserved.
    </div>
  </div>
</footer>
</body>
</html>
